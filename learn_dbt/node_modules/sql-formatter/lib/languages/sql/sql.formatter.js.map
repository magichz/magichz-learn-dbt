{"version":3,"file":"sql.formatter.js","names":["expandPhrases","Formatter","Tokenizer","functions","keywords","reservedSelect","reservedClauses","reservedSetOperations","reservedJoins","reservedPhrases","SqlFormatter","tokenizer","reservedKeywords","reservedFunctionNames","stringTypes","quote","prefixes","requirePrefix","identTypes","paramTypes","positional","operators"],"sources":["../../../src/languages/sql/sql.formatter.ts"],"sourcesContent":["import { expandPhrases } from '../../expandPhrases.js';\nimport Formatter from '../../formatter/Formatter.js';\nimport Tokenizer from '../../lexer/Tokenizer.js';\nimport { functions } from './sql.functions.js';\nimport { keywords } from './sql.keywords.js';\n\nconst reservedSelect = expandPhrases(['SELECT [ALL | DISTINCT]']);\n\nconst reservedClauses = expandPhrases([\n  // queries\n  'WITH [RECURSIVE]',\n  'FROM',\n  'WHERE',\n  'GROUP BY [ALL | DISTINCT]',\n  'HAVING',\n  'WINDOW',\n  'PARTITION BY',\n  'ORDER BY',\n  'LIMIT',\n  'OFFSET',\n  'FETCH {FIRST | NEXT}',\n  // Data manipulation\n  // - insert:\n  'INSERT INTO',\n  'VALUES',\n  // - update:\n  'UPDATE',\n  'SET',\n  'WHERE CURRENT OF',\n  // - delete:\n  'DELETE FROM',\n  // - truncate:\n  'TRUNCATE TABLE',\n  // Data definition\n  'CREATE [RECURSIVE] VIEW',\n  'CREATE [GLOBAL TEMPORARY | LOCAL TEMPORARY] TABLE',\n  'DROP TABLE',\n  // - alter table:\n  'ALTER TABLE',\n  'ADD COLUMN',\n  'DROP [COLUMN]',\n  'RENAME COLUMN',\n  'RENAME TO',\n  'ALTER [COLUMN]',\n  '{SET | DROP} DEFAULT', // for alter column\n  'ADD SCOPE', // for alter column\n  'DROP SCOPE {CASCADE | RESTRICT}', // for alter column\n  'RESTART WITH', // for alter column\n\n  // other\n  'SET SCHEMA',\n]);\n\nconst reservedSetOperations = expandPhrases([\n  'UNION [ALL | DISTINCT]',\n  'EXCEPT [ALL | DISTINCT]',\n  'INTERSECT [ALL | DISTINCT]',\n]);\n\nconst reservedJoins = expandPhrases([\n  'JOIN',\n  '{LEFT | RIGHT | FULL} [OUTER] JOIN',\n  '{INNER | CROSS} JOIN',\n  'NATURAL [INNER] JOIN',\n  'NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN',\n]);\n\nconst reservedPhrases = expandPhrases([\n  'ON {UPDATE | DELETE} [SET NULL | SET DEFAULT]',\n  '{ROWS | RANGE} BETWEEN',\n]);\n\nexport default class SqlFormatter extends Formatter {\n  tokenizer() {\n    return new Tokenizer({\n      reservedClauses,\n      reservedSelect,\n      reservedSetOperations,\n      reservedJoins,\n      reservedPhrases,\n      reservedKeywords: keywords,\n      reservedFunctionNames: functions,\n      stringTypes: [\n        { quote: \"''-qq-bs\", prefixes: ['N', 'U&'] },\n        { quote: \"''-raw\", prefixes: ['X'], requirePrefix: true },\n      ],\n      identTypes: [`\"\"-qq`, '``'],\n      paramTypes: { positional: true },\n      operators: ['||'],\n    });\n  }\n}\n"],"mappings":"AAAA,SAASA,aAAT,QAA8B,wBAA9B;AACA,OAAOC,SAAP,MAAsB,8BAAtB;AACA,OAAOC,SAAP,MAAsB,0BAAtB;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,SAASC,QAAT,QAAyB,mBAAzB;AAEA,MAAMC,cAAc,GAAGL,aAAa,CAAC,CAAC,yBAAD,CAAD,CAApC;AAEA,MAAMM,eAAe,GAAGN,aAAa,CAAC,CACpC;AACA,kBAFoC,EAGpC,MAHoC,EAIpC,OAJoC,EAKpC,2BALoC,EAMpC,QANoC,EAOpC,QAPoC,EAQpC,cARoC,EASpC,UAToC,EAUpC,OAVoC,EAWpC,QAXoC,EAYpC,sBAZoC,EAapC;AACA;AACA,aAfoC,EAgBpC,QAhBoC,EAiBpC;AACA,QAlBoC,EAmBpC,KAnBoC,EAoBpC,kBApBoC,EAqBpC;AACA,aAtBoC,EAuBpC;AACA,gBAxBoC,EAyBpC;AACA,yBA1BoC,EA2BpC,mDA3BoC,EA4BpC,YA5BoC,EA6BpC;AACA,aA9BoC,EA+BpC,YA/BoC,EAgCpC,eAhCoC,EAiCpC,eAjCoC,EAkCpC,WAlCoC,EAmCpC,gBAnCoC,EAoCpC,sBApCoC,EAoCZ;AACxB,WArCoC,EAqCvB;AACb,iCAtCoC,EAsCD;AACnC,cAvCoC,EAuCpB;AAEhB;AACA,YA1CoC,CAAD,CAArC;AA6CA,MAAMO,qBAAqB,GAAGP,aAAa,CAAC,CAC1C,wBAD0C,EAE1C,yBAF0C,EAG1C,4BAH0C,CAAD,CAA3C;AAMA,MAAMQ,aAAa,GAAGR,aAAa,CAAC,CAClC,MADkC,EAElC,oCAFkC,EAGlC,sBAHkC,EAIlC,sBAJkC,EAKlC,4CALkC,CAAD,CAAnC;AAQA,MAAMS,eAAe,GAAGT,aAAa,CAAC,CACpC,+CADoC,EAEpC,wBAFoC,CAAD,CAArC;AAKA,eAAe,MAAMU,YAAN,SAA2BT,SAA3B,CAAqC;EAClDU,SAAS,GAAG;IACV,OAAO,IAAIT,SAAJ,CAAc;MACnBI,eADmB;MAEnBD,cAFmB;MAGnBE,qBAHmB;MAInBC,aAJmB;MAKnBC,eALmB;MAMnBG,gBAAgB,EAAER,QANC;MAOnBS,qBAAqB,EAAEV,SAPJ;MAQnBW,WAAW,EAAE,CACX;QAAEC,KAAK,EAAE,UAAT;QAAqBC,QAAQ,EAAE,CAAC,GAAD,EAAM,IAAN;MAA/B,CADW,EAEX;QAAED,KAAK,EAAE,QAAT;QAAmBC,QAAQ,EAAE,CAAC,GAAD,CAA7B;QAAoCC,aAAa,EAAE;MAAnD,CAFW,CARM;MAYnBC,UAAU,EAAE,CAAE,OAAF,EAAU,IAAV,CAZO;MAanBC,UAAU,EAAE;QAAEC,UAAU,EAAE;MAAd,CAbO;MAcnBC,SAAS,EAAE,CAAC,IAAD;IAdQ,CAAd,CAAP;EAgBD;;AAlBiD"}